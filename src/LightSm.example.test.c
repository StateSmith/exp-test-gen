// This is a sample test file for the LightSm state machine.
// Generated by StateSmith.
// Feel free to make a copy and start adding your own tests.

// This sample uses CppUTest to run tests. 
//
// To run the tests:
// - install CppUTest if you don't already have it (https://cpputest.github.io/)
// - make a copy of this file, eg. LightSm.test.c
// - mock any dependencies from your state machine (see below)
// - compile your state machine and tests, eg.
//   g++ LightSm.test.c LightSm.c -L/path/to/CppUTest/lib/dir -lCppUTest
// - make the tests executable, eg.
//   chmod +x a.out
// - run the tests, eg.
//   ./a.out

#include "CppUTest/CommandLineTestRunner.h"

// ACTION REQUIRED
// You must define any actions and variables used by your state machine.
// We recommend mocking rather than importing your actual functions,
// to keep these tests purely about testing the state machine itself.
// (Your function implementations should also be tested, but in separate tests.)
// Create LightSm.mocks.test.h and add your mocks there.
#include "LightSm.mocks.test.h"

#include "LightSm.h"




int main(int ac, char** av)
{
    return CommandLineTestRunner::RunAllTests(ac, av);
}


// Use 'state_id' to access the current state of the state machine, eg.
// expect(sm.state_id).toBe(LightSm.StateId.OFF);
//
// Use 'vars' to access the variables of the state machine, eg.
// expect(sm.vars.myVar).toBe(42);
//
// Use 'dispatchEvent' to send events to the state machine, eg.
// sm.dispatchEvent(LightSm.EventId.INCREASE);
//
// Use mock functions to check if the functions are called, eg.
// expect(globalThis.println.mock.calls).toHaveLength(1);
// See https://jestjs.io/ for more information on Jest.

TEST_GROUP(LightSmTest)
{
};

TEST(LightSmTest, StartsInOffState) {
    LightSm sm;
    LightSm_ctor(&sm);
    LightSm_start(&sm);
    CHECK_EQUAL(LightSm_StateId_OFF, sm.state_id);
}
